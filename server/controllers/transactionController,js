import Transaction from "../models/Transaction.js";

export const getTransactions = async (req, res) => {
  const tx = await Transaction.find({ user: req.user.id }).sort({ createdAt: -1 });
  res.json(tx);
};

export const addTransaction = async (req, res) => {
  const { description, amount, category } = req.body;

  const tx = await Transaction.create({
    user: req.user.id,
    description,
    amount,
    category,
  });

  res.status(201).json(tx);
};

export const updateTransaction = async (req, res) => {
  const tx = await Transaction.findByIdAndUpdate(
    req.params.id,
    req.body,
    { new: true }
  );

  res.json(tx);
};

export const deleteTransaction = async (req, res) => {
  await Transaction.findByIdAndDelete(req.params.id);
  res.json({ message: "Deleted" });
};
